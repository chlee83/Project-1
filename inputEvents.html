<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>EVENT-ually</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <!-- Added link to the jQuery Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<style>

    .grid {
        height: 100px;
        border: solid 1px #000;
    }

    .input-bar {
        height: 450px;
        border: solid 1px #000;
    }


</style>

</head>
<body>
    
    <div class="container">
        <div class="row">
            <div class="col s12">

                <h1>Project 1</h1>

                <div class="calendar">

                    <div class="row">
                        <div class="col s2 grid" id="2019-03-01">1</div>
                        <div class="col s2 grid" id="2019-03-02">2</div>
                        <div class="col s2 grid" id="2019-03-03">3</div>
                        <div class="col s2 grid" id="2019-03-04">4</div>
                        <div class="col s2 grid" id="2019-03-05">5</div>
                        <div class="col s2 grid" id="2019-03-06">6</div>
                    </div>

                    <div class="row">
                        <div class="col s2 grid" id="2019-03-07">7</div>
                        <div class="col s2 grid" id="2019-03-08">8</div>
                        <div class="col s2 grid" id="2019-03-09">9</div>
                        <div class="col s2 grid" id="2019-03-10">10</div>
                        <div class="col s2 grid" id="2019-03-11">11</div>
                        <div class="col s2 grid" id="2019-03-12">12</div>
                    </div>

                    <div class="row">
                        <div class="col s2 grid" id="2019-03-13">13</div>
                        <div class="col s2 grid" id="2019-03-14">14</div>
                        <div class="col s2 grid" id="2019-03-15">15</div>
                        <div class="col s2 grid" id="2019-03-16">16</div>
                        <div class="col s2 grid" id="2019-03-17">17</div>
                        <div class="col s2 grid" id="2019-03-18">18</div>
                    </div>

                </div>

                <!-- Input events side bar -->
                <div class="row">
                    <form class="col s4 input-bar">

                        <div class="row">
                            <div class="input-field col s12">
                                <label for="input-events">Event</label>
                                <input id="input-events" type="text" class="validate">
                            </div>
                        </div>

                        <div class="row">
                            <div class="input-field col s12">
                                <input type="date" id="inputDate" value="2019-03-01" min="2019-01-01" max="2019-12-31">
                            </div>
                        </div>

                        <div class="row">
                            <div class="input-field col s12">
                                <textarea id="textarea1" class="materialize-textarea"></textarea>
                                <label for="textarea1">Details</label>
                            </div>
                        </div>

                        <button class="btn waves-effect waves-light" type="submit" name="action" id="submitbtn">Submit
                            <i class="material-icons right">send</i>
                        </button>
                    </form>
                </div>
 



            </div>
        </div>
    </div>





<script src="https://www.gstatic.com/firebasejs/5.8.6/firebase.js"></script>

<script type="text/javascript">

$(document).ready(function() {

// Initialize Firebase
var config = {
apiKey: "AIzaSyBFsFBm0U8d1mNzxs64khxCxGDWBbgQqPU",
authDomain: "group-project-1-6f6fd.firebaseapp.com",
databaseURL: "https://group-project-1-6f6fd.firebaseio.com",
projectId: "group-project-1-6f6fd",
storageBucket: "group-project-1-6f6fd.appspot.com",
messagingSenderId: "110990570117"
};
firebase.initializeApp(config);

var database = firebase.database();



//pressing submit pushes event title, date, and details to firebase
$("#submitbtn").on("click", function(event) {

    event.preventDefault();

    //grab user input name, details, date
    var inputEvent = $("#input-events").val().trim();
    var inputDetails = $("#textarea1").val().trim();
    var inputDate = $("#inputDate").val().trim();


    //if blank, don't push. else push to firebase
    if (inputEvent === "") {
        return false;

    } else {

        //upload input text to database
        database.ref().push({
            event: inputEvent,
            detail: inputDetails,
            date: inputDate
        });

        //clear information in text fields
        $("#input-events").val("");
        $("#textarea1").val("");
        $("#inputDate").val("");
    }

});


//display the data pushed to firebase to calendar
database.ref().on("child_added", function(childSnapshot) {

    //grab detaills
    var eventInputText = childSnapshot.val().event;
    var detailsInputText = childSnapshot.val().detail;
    var dateInputText = childSnapshot.val().date;

    //create new span variable
    var newList = $("<li>");

        newList.addClass("event-title");
        newList.append("<strong>" + eventInputText + "</strong><br>");
        newList.attr("title", detailsInputText);

    $("#" + dateInputText).append(newList);

});


    

    



});
    
</script>


</body>
</html>